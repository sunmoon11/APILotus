jQuery(document).ready(function(t){function e(){t.ajax({type:"GET",url:"../daemon/ajax_admin/setting_alert_type.php",data:{},success:function(e){if("error"!=e)if("no_cookie"!=e){var a=jQuery.parseJSON(e),o="";i=a;for(var l=0;l<a.length;l++)"1"==a[l][10]&&(o+='<div id="atitle_'+a[l][1]+'" style="height:35px;padding-top:3px;border-bottom: 1px solid #e5e5e5;">',o+='<button type="button" id="alert_'+a[l][1]+'" class="btn btn-link btn-sm btn_alert">'+d+"</button>",o+='<span id="aname_'+a[l][1]+'" style="font-size:14px">'+a[l][2]+" </span>",o+="</div>",o+='<div id="abody_'+a[l][1]+'" style="display:none;width:100%;padding-left:37px;padding-bottom:5px;border-bottom:1px solid #e5e5e5;">',o+='<table class="table" style="padding:0;margin:0;border:none;background:#f9f2f4;">',o+='<tbody id="acontent_'+a[l][1]+'"></tbody>',o+="</table>",o+="</div>");t(".alert_body").html(o),n()}else window.location.href="../../admin/login.php"},failure:function(t){}})}function n(){t.ajax({type:"GET",url:"../daemon/ajax_admin/alert_recent_list.php",data:{},success:function(e){var n=jQuery.parseJSON(e);if("success"==n[0]){for(var a=n[1],o="",d=0;d<i.length;d++)t("#acontent_"+i[d][1]).html("");for(d=0;d<a.length;d++)o="<tr>",o+='<td style="border:none;padding:0;text-align:left;word-wrap: break-word;word-break:break-all;font-size:14px">',o+="<b>"+a[d][12]+"</b>, ",o+=a[d][3]+" / "+a[d][4],a[d][9]==a[d][10]?o+=", Today":o+=", "+a[d][9]+" ~ "+a[d][10],o+="</td>",o+='<td style="border:none;padding:0;width:50px;text-align:right">',o+='<button type="button" class="btn btn-link btn-sm btn_alert_delete" id="'+a[d][0]+'">'+l+"</button>",o+="</td>",o+="</tr>",t("#acontent_"+a[d][2]).append(o);for(var r=0,d=0;d<i.length;d++){var s=i[d][2]+" ",c=parseInt(t("#acontent_"+i[d][1]).children().length);c>0&&(s+='<span style="padding:1px 5px 1px 5px;background:#e74b4e;color:#fff;border-radius:3px;">'+c+"</span>"),t("#aname_"+i[d][1]).html(s),r+=c}0==r?t(".span_alert_count").html(""):t(".span_alert_count").html('<span class="alert_count">'+r+"</span>")}else if("no_cookie"==n[0])return void(window.location.href="../../admin/login.php")},failure:function(t){}})}function a(e){t.ajax({type:"GET",url:"../daemon/ajax_admin/alert_delete_item.php",data:{alert_id:e},success:function(t){if("success"==t)n();else{if("no_cookie"==t)return void(window.location.href="../../admin/login.php");alert("Error! cannot be deleted.")}},failure:function(t){}})}function o(){t.ajax({type:"GET",url:"../daemon/ajax_admin/alert_delete_item_all.php",data:{},success:function(t){if("success"==t)n();else{if("no_cookie"==t)return void(window.location.href="../../admin/login.php");alert("Error! cannot be deleted.")}},failure:function(t){}})}var i,l='<span class="glyphicon glyphicon-remove-sign" aria-hidden="true" style="color: #ffa5a5"></span>',d='<span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span>',r=!1;t("#alert_link").click(function(){(r=!r)?(t(".alert_body").html('<div style="text-align:center"><img src="../images/loading.gif" style="width:40px"></div>'),t(".dropdown_content").slideDown(),e()):t(".dropdown_content").slideUp()}),t(".alert_body").on("click",".btn_alert",function(e){var n=t(this).prop("id").substring(6);-1!=t(this).html().indexOf("glyphicon-triangle-bottom")?(t(this).html(d),t("#abody_"+n).slideUp("1000",function(){t("#atitle_"+n).css("border-bottom","1px solid #e5e5e5"),t("#atitle_"+n).css("background","white"),t("#abody_"+n).css("background","white"),t("#acontent_"+n).css("background","white")})):(t(this).html('<span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true" style="color: #ffa5a5"></span>'),t("#abody_"+n).slideDown("1000"),t("#atitle_"+n).css("border-bottom","none"),t("#atitle_"+n).css("background","#fff"),t("#abody_"+n).css("background","#fff"),t("#acontent_"+n).css("background","#fff"))}),t(".alert_body").on("click",".btn_alert_read",function(e){var n=t(this).prop("id");ajaxAlertReadItem(n)}),t(".alert_body").on("click",".btn_alert_delete",function(e){a(t(this).prop("id"))}),t(".btn_alert_delete_all").click(function(){t("#alert_delete_all_modal").modal("toggle")}),t(".modal_btn_alert_delete_all").click(function(){t("#alert_delete_all_modal").modal("toggle"),o()})});
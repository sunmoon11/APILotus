jQuery( document ).ready(function( $ ) 
{
	var spinner = '<img src="./images/loading.gif" style="width:22px;height:22px;">';

    	
	init();


	function init()
	{
		
	}

	$('#submit_now').click(function ()
    {
        if ($('.client_name').val() == '')
        {
        	$('#submit_status').css("color", "red");
            $('#submit_status').html("* Please input your name.");
            $('.client_name').focus();

            return;
        }

        if ($('.client_email').val() == '')
        {
        	$('#submit_status').css("color", "red");
            $('#submit_status').html("* Please input your email.");
            $('.client_email').focus();

            return;
        }

        if ($('.client_comment').val() == '')
        {
        	$('#submit_status').css("color", "red");
            $('#submit_status').html("* Please input your comment.");            
            $('.client_comment').focus();

            return;
        }

        ajaxCustomerSubmit();
    });

    function ajaxCustomerSubmit()
    {
        $('.submit_waiting').html(spinner);

        $.ajax(
        {
            type : 'POST',
            url : './daemon/ajax_landingpage/customer_feedback_add.php',
            data : {
                'client_name' : $('.client_name').val(), 
                'client_email' : $('.client_email').val(), 
                'client_comment' : $('.client_comment').val()
            },
            success:function(response)
            {
            	$('.submit_waiting').html('');

                if (response == 'success')
                {
                	$('#submit_status').css("color", "blue");
			        $('#submit_status').html("* Your comment has been successfully sent. Thank you!");

			        $('.client_name').val('');
			        $('.client_email').val('');
			        $('.client_comment').val('');
                }
                else
                {
                	$('#submit_status').css("color", "red");
	        		$('#submit_status').html("* Your comment submit failed. Try it again!");
                }
            },
            failure:function(response) 
            {
            	$('.submit_waiting').html('');
                $('#submit_status').css("color", "red");
	        	$('#submit_status').html("* Your comment submit failed. Try it again!");
            }
        });
    }
});